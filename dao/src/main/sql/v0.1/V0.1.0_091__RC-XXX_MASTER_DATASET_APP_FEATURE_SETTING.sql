DECLARE
		V_LOOKUP_EXISTS VARCHAR2(5);
		V_LOOKUP_TYPE_ID NUMBER;
		V_SORT_ORDER NUMBER;
		Featurenameid NUMBER;
		V_LOOKUP_DATASET NUMBER;
		V_APP_SETTING_EXISTS VARCHAR2(5);
		Masterdatasetid NUMBER;
    ----------------------------
		FUNCTION LOOKUP_VALUE_FNC(P_LOOKUP_VALUE IN VARCHAR2,P_LOOKUP_NAME IN VARCHAR2)
		RETURN VARCHAR2
		AS
		V_LOOKUP_EXIST VARCHAR2(1);
		BEGIN
		SELECT 'Y'
		INTO V_LOOKUP_EXIST
		FROM DBO_MP.LOOKUP_TYPE LT,
		DBO_MP.LOOKUP LP
		WHERE 
		LT.LOOKUP_TYPE_ID=LP.LOOKUP_TYPE_ID
		AND UPPER(LP.LOOKUP_NAME)=TRIM(UPPER(P_LOOKUP_VALUE))
		AND UPPER(LT.LOOKUP_TYPE_NAME)=TRIM(UPPER(P_LOOKUP_NAME))
		AND ROWNUM=1;
		RETURN V_LOOKUP_EXIST;
		EXCEPTION
			WHEN OTHERS THEN
				V_LOOKUP_EXIST:='N';
				RETURN V_LOOKUP_EXIST;
		END LOOKUP_VALUE_FNC;
		--==============================
		PROCEDURE LOOKUP_TYPE_FNC(P_LOOKUP_TYPE_NAME IN VARCHAR2)
		AS
		V_LOOKUP_EXIST VARCHAR2(1);
    BEGIN
		BEGIN
			SELECT 'Y'
			INTO V_LOOKUP_EXIST
			FROM DBO_MP.LOOKUP_TYPE SP
			WHERE 
			SP.LOOKUP_TYPE_NAME=P_LOOKUP_TYPE_NAME
			AND ROWNUM=1;
		 --
		EXCEPTION
			WHEN OTHERS THEN
				V_LOOKUP_EXIST:='N';
		END;
		IF V_LOOKUP_EXIST='N' THEN
			INSERT INTO DBO_MP.LOOKUP_TYPE(LOOKUP_TYPE_ID,LOOKUP_TYPE_NAME) VALUES (DBO_MP.SEQ_LOOKUP_TYPE_ID.NEXTVAL,P_LOOKUP_TYPE_NAME);
			COMMIT;
		END IF;
		END LOOKUP_TYPE_FNC;
		--===============================
		PROCEDURE  LOOKUP_VALUE_INS(P_LOOKUP_NAME IN VARCHAR2,P_LOOKUP_TYPE_ID IN NUMBER,P_SORT_ORDER IN NUMBER)
		AS
		BEGIN
		INSERT INTO DBO_MP.LOOKUP (LOOKUP_ID,LOOKUP_NAME,DISPLAY_ORDER,MNEMONIC_CODE,LOOKUP_TYPE_ID,IS_ACTIVE) 
		VALUES (DBO_MP.SEQ_LOOKUP_ID.NEXTVAL,P_LOOKUP_NAME,P_SORT_ORDER,P_LOOKUP_NAME,P_LOOKUP_TYPE_ID,NULL);
		EXCEPTION
			WHEN OTHERS THEN
				NULL;
		END LOOKUP_VALUE_INS;
		--=============================================
	
		PROCEDURE  APP_SETTING_INS(P_FEATURE_NAME IN NUMBER,P_MASTERDATASET IN VARCHAR2)
		AS
		BEGIN
		INSERT INTO DBO_MP.APP_FEATURE_SETTING (ID,DEPARTMENT_ID,FEATURE_ID,VALUE) 
		VALUES (Dbo_Mp.Seq_App_Feature_Setting_Id.Nextval,NULL,P_FEATURE_NAME,P_MASTERDATASET);
		EXCEPTION
			WHEN OTHERS THEN
				NULL;
		END APP_SETTING_INS;
		--=============================================
			FUNCTION APP_VALUE_FNC(P_FEATURE_NAME IN NUMBER,P_MASTERDATASET IN VARCHAR2)
		RETURN VARCHAR2
		AS
		V_APP_VALUE_EXIST VARCHAR2(1);
		BEGIN
		SELECT 'Y'
		INTO V_APP_VALUE_EXIST
		FROM DBO_MP.APP_FEATURE_SETTING
		WHERE 
		FEATURE_ID=P_FEATURE_NAME
		AND VALUE=P_MASTERDATASET
		AND ROWNUM=1;
		RETURN V_APP_VALUE_EXIST;
		EXCEPTION
			WHEN OTHERS THEN
				V_APP_VALUE_EXIST:='N';
				RETURN V_APP_VALUE_EXIST;
		END APP_VALUE_FNC;
		--===============================================

    BEGIN
		--
		--check whether sys property exists
		-------------------------------
		BEGIN
			LOOKUP_TYPE_FNC('FEATURE_NAME');		
		END;		
		-----------------------------
		BEGIN
		  SELECT SP.LOOKUP_TYPE_ID,MAX(NVL(DISPLAY_ORDER,0))
		  INTO V_LOOKUP_TYPE_ID,V_SORT_ORDER
		  from DBO_MP.LOOKUP_TYPE SP
		, DBO_MP.LOOKUP SPN
		WHERE LOOKUP_TYPE_NAME='FEATURE_NAME'
		AND SPN.LOOKUP_TYPE_ID(+)=SP.LOOKUP_TYPE_ID
		GROUP BY SP.LOOKUP_TYPE_ID;
		  EXCEPTION
			WHEN OTHERS  THEN 
			  DBMS_OUTPUT.PUT_LINE('LOOKUP for does not exist FEATURE_NAME');
			END;
			--
		IF V_LOOKUP_TYPE_ID IS NOT NULL THEN 
		--
		BEGIN
			V_LOOKUP_EXISTS:='N';
			V_SORT_ORDER:=V_SORT_ORDER+1;
			V_LOOKUP_EXISTS:=LOOKUP_VALUE_FNC('Master Dataset','FEATURE_NAME');
			IF V_LOOKUP_EXISTS='N' THEN 
				LOOKUP_VALUE_INS('Master Dataset',V_LOOKUP_TYPE_ID,V_SORT_ORDER);
			END IF;
			END;
	--
	  COMMIT;
			--
		END IF;
		--INSERT INTO APP_FEATURE_SETTING
		BEGIN
		Select Lookup_Id 
		Into Featurenameid 
		From Dbo_Mp.Lookup 
		Where Lookup_Name = 'Master Dataset';
		--
		SELECT Lookup_Type_Id 
		INTO V_LOOKUP_DATASET
		FROM Dbo_Mp.Lookup_Type 
		WHERE Lookup_Type_Name='ROLLCALL_DATASET';
		--		
		Select Lookup_Id 
		Into Masterdatasetid 
		From Dbo_Mp.Lookup 
		Where Lookup_Name = 'MP/TV Creative' 
		And Lookup_Type_Id = V_LOOKUP_DATASET;
		--
		IF Masterdatasetid IS NOT NULL 
		THEN
		--
		V_APP_SETTING_EXISTS:=APP_VALUE_FNC(Featurenameid,Masterdatasetid);
		IF V_APP_SETTING_EXISTS='N' THEN 
				APP_SETTING_INS(Featurenameid, To_Char(Masterdatasetid));
		END IF;		
		END IF;
		Commit;
		EXCEPTION
		WHEN OTHERS THEN
		NULL;
		END;
		
		
	END;
	/